package org.javahelpers.simple.builders.example;

import static org.javahelpers.simple.builders.core.util.TrackedValue.changedValue;
import static org.javahelpers.simple.builders.core.util.TrackedValue.initialValue;
import static org.javahelpers.simple.builders.core.util.TrackedValue.unsetValue;

import java.util.function.BooleanSupplier;
import java.util.function.Consumer;
import java.util.function.Supplier;
import javax.annotation.processing.Generated;
import org.javahelpers.simple.builders.core.annotations.BuilderImplementation;
import org.javahelpers.simple.builders.core.interfaces.IBuilderBase;
import org.javahelpers.simple.builders.core.util.TrackedValue;

/**
 * Builder for {@code org.javahelpers.simple.builders.example.ProductRecord}.
 */
@Generated("Generated by org.javahelpers.simple.builders.processor.BuilderProcessor")
@BuilderImplementation(
    forClass = ProductRecord.class
)
public class ProductRecordBuilder implements IBuilderBase<ProductRecord> {
  /**
   * Tracked value for <code>name</code>: name.
   */
  private TrackedValue<String> name = unsetValue();

  /**
   * Tracked value for <code>price</code>: price.
   */
  private TrackedValue<Double> price = unsetValue();

  /**
   * Tracked value for <code>category</code>: category.
   */
  private TrackedValue<String> category = unsetValue();

  /**
   * Initialisation of builder for {@code org.javahelpers.simple.builders.example.ProductRecord} by a instance.
   *
   * @param instance object instance for initialisiation
   */
  public ProductRecordBuilder(ProductRecord instance) {
    this.name = initialValue(instance.name());
    this.price = initialValue(instance.price());
    if (this.price.value() == null) {
      throw new IllegalArgumentException("Cannot initialize builder from instance: field 'price' is marked as non-null but source object has null value");
    }
    this.category = initialValue(instance.category());
  }

  /**
   * Empty constructor of builder for {@code org.javahelpers.simple.builders.example.ProductRecord}.
   */
  public ProductRecordBuilder() {
  }

  /**
   * Sets the value for <code>category</code>.
   *
   * @param format category
   * @param args category
   * @return current instance of builder
   */
  public ProductRecordBuilder category(String format, Object... args) {
    this.category = changedValue(String.format(format, args));
    return this;
  }

  /**
   * Sets the value for <code>price</code>.
   *
   * @param price price
   * @return current instance of builder
   */
  public ProductRecordBuilder price(double price) {
    this.price = changedValue(price);
    return this;
  }

  /**
   * Sets the value for <code>price</code> by invoking the provided supplier.
   *
   * @param priceSupplier supplier for price
   * @return current instance of builder
   */
  public ProductRecordBuilder price(Supplier<Double> priceSupplier) {
    this.price = changedValue(priceSupplier.get());
    return this;
  }

  /**
   * Sets the value for <code>name</code> by invoking the provided supplier.
   *
   * @param nameSupplier supplier for name
   * @return current instance of builder
   */
  public ProductRecordBuilder name(Supplier<String> nameSupplier) {
    this.name = changedValue(nameSupplier.get());
    return this;
  }

  /**
   * Sets the value for <code>name</code>.
   *
   * @param format name
   * @param args name
   * @return current instance of builder
   */
  public ProductRecordBuilder name(String format, Object... args) {
    this.name = changedValue(String.format(format, args));
    return this;
  }

  /**
   * Sets the value for <code>category</code>.
   *
   * @param category category
   * @return current instance of builder
   */
  public ProductRecordBuilder category(String category) {
    this.category = changedValue(category);
    return this;
  }

  /**
   * Sets the value for <code>name</code> by executing the provided consumer.
   *
   * @param nameStringBuilderConsumer consumer providing an instance of name
   * @return current instance of builder
   */
  public ProductRecordBuilder name(Consumer<StringBuilder> nameStringBuilderConsumer) {
    StringBuilder builder = new StringBuilder();
    nameStringBuilderConsumer.accept(builder);
    this.name = changedValue(builder.toString());
    return this;
  }

  /**
   * Sets the value for <code>name</code>.
   *
   * @param name name
   * @return current instance of builder
   */
  public ProductRecordBuilder name(String name) {
    this.name = changedValue(name);
    return this;
  }

  /**
   * Sets the value for <code>category</code> by invoking the provided supplier.
   *
   * @param categorySupplier supplier for category
   * @return current instance of builder
   */
  public ProductRecordBuilder category(Supplier<String> categorySupplier) {
    this.category = changedValue(categorySupplier.get());
    return this;
  }

  /**
   * Sets the value for <code>category</code> by executing the provided consumer.
   *
   * @param categoryStringBuilderConsumer consumer providing an instance of category
   * @return current instance of builder
   */
  public ProductRecordBuilder category(Consumer<StringBuilder> categoryStringBuilderConsumer) {
    StringBuilder builder = new StringBuilder();
    categoryStringBuilderConsumer.accept(builder);
    this.category = changedValue(builder.toString());
    return this;
  }

  @Override
  public ProductRecord build() {
    if (!this.price.isSet()) {
      throw new IllegalStateException("Required field 'price' must be set before calling build()");
    }
    if (this.price.value() == null) {
      throw new IllegalStateException("Field 'price' is marked as non-null but null value was provided");
    }
    ProductRecord result = new ProductRecord(this.name.value(), this.price.value(), this.category.value());
    return result;
  }

  /**
   * Creating a new builder for {@code org.javahelpers.simple.builders.example.ProductRecord}.
   *
   * @return builder for {@code org.javahelpers.simple.builders.example.ProductRecord}
   */
  public static ProductRecordBuilder create() {
    return new ProductRecordBuilder();
  }

  /**
   * Conditionally applies builder modifications based on a condition evaluation.
   *
   * @param condition the condition to evaluate
   * @param trueCase the consumer to apply if condition is true
   * @param falseCase the consumer to apply if condition is false (can be null)
   * @return this builder instance
   */
  public ProductRecordBuilder conditional(BooleanSupplier condition,
      Consumer<ProductRecordBuilder> trueCase, Consumer<ProductRecordBuilder> falseCase) {
    if (condition.getAsBoolean()) {
        trueCase.accept(this);
    } else if (falseCase != null) {
        falseCase.accept(this);
    }
    return this;
  }

  /**
   * Conditionally applies builder modifications if the condition is true.
   *
   * @param condition the condition to evaluate
   * @param yesCondition the consumer to apply if condition is true
   * @return this builder instance
   */
  public ProductRecordBuilder conditional(BooleanSupplier condition,
      Consumer<ProductRecordBuilder> yesCondition) {
    return conditional(condition, yesCondition, null);
  }

  /**
   * Interface that can be implemented by the DTO to provide fluent modification methods.
   */
  public interface With {
    /**
     * Applies modifications to a builder initialized from this instance and returns the built object.
     *
     * @param b the consumer to apply modifications
     * @return the modified instance
     */
    default ProductRecord with(Consumer<ProductRecordBuilder> b) {
      ProductRecordBuilder builder;
      try {
        builder = new ProductRecordBuilder(ProductRecord.class.cast(this));
      } catch (ClassCastException ex) {
        throw new IllegalArgumentException("The interface 'ProductRecordBuilder.With' should only be implemented by classes, which could be casted to 'ProductRecord'", ex);
      }
      b.accept(builder);
      return builder.build();
    }

    /**
     * Creates a builder initialized from this instance.
     *
     * @return a builder initialized with this instance's values
     */
    default ProductRecordBuilder with() {
      try {
        return new ProductRecordBuilder(ProductRecord.class.cast(this));
      } catch (ClassCastException ex) {
        throw new IllegalArgumentException("The interface 'ProductRecordBuilder.With' should only be implemented by classes, which could be casted to 'ProductRecord'", ex);
      }
    }
  }
}
